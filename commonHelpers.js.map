{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["'use strict'\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst form = document.querySelector('.search-form');\nconst galleryBox = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader-container');\nconst loadMoreBtn = document.querySelector(\".load-more\");\n\nconst instance = axios.create({\n    method: 'get',\n    baseURL: 'https://pixabay.com/api/',\n    params: {\n        key: '41837495-d070c30be5c0243a4bb3b397a',\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 40,\n    }\n});\n\nlet page = 1;\nconst pageOfQuery = () => {\n    page++;\n}\n\nlet gallery = new SimpleLightbox('.gallery a', { \n    captionsData: 'alt',\n    captionDelay: 250\n});\n\nlet value;\n\nlet mess;\n\nform.addEventListener(\"submit\", async event => {\n    event.preventDefault();\n    \n    page = 1;\n    \n    loaderToShow();\n    \n    galleryBox.innerHTML = '';\n    gallery.refresh();\n    \n    value = form.elements['keywords'].value;\n    \n    try {\n        const images = await instance({\n            params: {\n                q: value,\n                page\n            }\n        });\n        console.log(images.data.total);\n        mess = images.data.total\n        imagesFound();\n        innerImages(images.data);\n    } catch(error) {\n        showUError();\n    }\n    loaderToHide();\n    form.reset();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    pageOfQuery();\n    try {\n        const images = await instance({\n            params: {\n                q: value,\n                page,\n            }\n        });\n\n        addImagesBot(images.data);\n        scrollPage();\n    } catch (error) {\n        showEmError();\n        scrollPage();\n    }\n});\n\nconst addImages = images => {\n    return images.hits.map(({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) => `\n    <li class=\"img\">\n       <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\"></a>\n      <ul class=\"img-info\">\n        <li class=\"img-info-item\"><span>Likes</span> ${likes}</li>\n        <li class=\"img-info-item\"><span>Views</span> ${views}</li>\n        <li class=\"img-info-item\"><span>Comments</span> ${comments}</li>\n        <li class=\"img-info-item\"><span>Downloads</span> ${downloads}</li>\n      </ul>\n    </li>`).join('');\n}\n\nconst innerImages = images => {\n    if (images.hits.length === 0) throw new Error(images.status);\n\n    galleryBox.innerHTML = addImages(images);\n\n    loadMoreToShow();\n\n    if (Math.ceil(images.total / 40) <= page) {\n        showEmError();\n    }\n\n    gallery.refresh();\n}\n\nconst addImagesBot = images => {\n    if (Math.ceil(images.total / 40) <= page) {\n\n        galleryBox.insertAdjacentHTML('beforeend', addImages(images));\n        gallery.refresh();\n        throw new Error(images.status);\n    }\n\n    galleryBox.insertAdjacentHTML('beforeend', addImages(images));\n\n    gallery.refresh();\n}\n\nconst showUError = (message = \"An error occurred.\") => {\n    iziToast.show({\n        message: message,\n        maxWidth: 432,\n        iconUrl: './img/error-icon.svg',\n        iconColor: '#FFFFFF',\n        backgroundColor: '#EF4040',\n        messageColor: '#FFFFFF',\n        position: 'topRight'\n    });\n    galleryBox.innerHTML = '';\n}\n\nconst showEmError = () => {\n    iziToast.show({\n        message: `We're sorry, but you've reached the end of search results.`,\n        maxWidth: 432,\n        iconUrl: './img/error-icon.svg',\n        iconColor: '#FFFFFF',\n        backgroundColor: '#87CEEB',\n        messageColor: '#FFFFFF',\n        position: 'topRight'\n    });\n    loadMoreToHide();\n}\n\nconst imagesFound = () => {\n    iziToast.show({\n        message: `We found ${mess} images.`,\n        maxWidth: 432,\n        backgroundColor: 'green',\n        messageColor: '#FFFFFF',\n        position: 'topRight'\n    });\n}\n\nconst scrollPage = () => {\n    const height = document.querySelector(\".img\").getBoundingClientRect().height * 2\n    window.scrollBy({\n        top: height,\n        behavior: \"smooth\",\n    });\n}\n\nconst loaderToShow = () => {\n  loader.style.display = 'block';\n}\nconst loaderToHide = () => {\n  loader.style.display = 'none';\n}\nconst loadMoreToShow = () => {\n    loadMoreBtn.style.display = 'block';\n}\nconst loadMoreToHide = () => {\n    loadMoreBtn.style.display = 'none';\n}\n"],"names":["form","galleryBox","loader","loadMoreBtn","instance","axios","page","pageOfQuery","gallery","SimpleLightbox","value","mess","event","loaderToShow","images","imagesFound","innerImages","showUError","loaderToHide","addImagesBot","scrollPage","showEmError","addImages","largeImageURL","webformatURL","tags","likes","views","comments","downloads","loadMoreToShow","message","iziToast","loadMoreToHide","height"],"mappings":"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"}